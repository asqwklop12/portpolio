<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="LikeMapper">

<!-- 중복 확인 -->
<select id="duplicate" resultType="int">
      SELECT 
    			       count(boardId) 
    			                    					FROM LikeInfo
    								
    WHERE              boardId = #{boardId}
                 AND userEmail = #{userEmail}

</select>

<!-- 중복 생성시 제거 -->
<delete id="kill">

  DELETE                                   FROM likeInfo 
  
  WHERE           likeId = #{likeId}

</delete>


<insert id="board_Like" parameterType="like">

		INSERT 						INTO LikeInfo 
		
				   (
				      boardId
				     ,userEmail 
				   )
				  
				  
		VALUES     (
		
			          #{boardId}
			         ,#{userEmail}
			         
			          
			       );

</insert>

 <update id="increase" parameterType="like">
 
  
   	 UPDATE		        								LikeInfo
    
    
    
     SET	
     				    boardLike  = 1
    				
 
                                      
     WHERE 
                   	       boardId = #{boardId}
                   	and  userEmail = #{userEmail} 
  
   </update> 
 
 
 <update id="default" parameterType="like">
 
     UPDATE		        								LikeInfo
    
    
    
     SET	
     				      boardLike  = 0
    				
 
                                      
     WHERE 
                           boardId = #{boardId}
                      and  userEmail = #{userEmail}
 
 </update>

<select id="result" resultType="int">
   
    SELECT 
    			       boardLike 
    			                    					FROM LikeInfo
    								
    WHERE              boardId = #{boardId}
                 AND userEmail = #{userEmail}
 
   
 
 </select>

 <!-- 게시글 숫자 증감 -->
 <update id="board_heart" parameterType="like">
 
  
   	 UPDATE		        								boardInfo
    
    
    
     SET	
     				    boardLike  = boardLike + 1
    				
 
                                      
     WHERE 
                   	       boardId = #{boardId}
  
   </update> 
 
 
 <update id="board_break" parameterType="like">
 
     UPDATE		        								boardInfo
    
    
    
     SET	
     				      boardLike  = boardLike - 1
    				
 
                                      
     WHERE 
                           boardId = #{boardId}
 
 </update>


<select id="board" parameterType="like" resultType="int">

    SELECT 
    			       boardLike 
    			                    					FROM BoardInfo
    								
    WHERE              boardId = #{boardId}
 

</select>
 

</mapper>