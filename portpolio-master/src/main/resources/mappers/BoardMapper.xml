<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper

  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BoardMapper">

 <!-- 게시판 -->
 <select id="list" resultType="board">
     
      SELECT  
                      boardId 		as no
                    , boardTitle 	as title
                    , boardWriter	as writer
       	            , boardDate   	as date
       	            
             	                                    FROM boardInfo 
 </select>
 
 <!-- 상세 보기 -->
 <select id="detail" resultType="board">
    	
      SELECT 
      		    	 b.boardId			as no
      		  	   , b.boardTitle		as title
      		  	   , b.boardWriter		as writer
      		       , b.boardContent 	as content
      		       , u.UserImage		as image
      		    	   
      		        					            FROM boardInfo b
      		        				             
        											JOIN userInfo u
      		      	
       ON	      	b.boardWriter = u.userName
      		      				  		
       WHERE 
      		     
      		     	b.boardId = #{no}  		
      		     				  		
 </select>
  

  
  <!-- 게시글 추가-->
   <insert id="write" parameterType= "board" >

		
	    INSERT                          	     	INTO boardInfo 
 		
 					(
 						  boardTitle
 					   ,  userId
 					   ,  boardContent
 					   ,  boardWriter
 					   ,  boardDate
 			        )
 			      	
	    VALUES      (    #{title}
	                   , #{userId}
	                   , #{content}
	                   , #{writer}
				       ,   now()
				
				    ); 
				    
	<!-- 	<selectKey  resultType="string"  keyProperty="writer" order="BEFORE">
		
			SELECT 
						 userName as writer		
														FROM UserInfo
			WHERE	
						 userId = #{Id}	 						 
														
		</selectKey>		    
 	 -->         
   </insert> 
</mapper>


